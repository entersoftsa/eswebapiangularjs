(function(){"use strict";var t=angular.module("es.Core.Filters",[]);t.filter("esTrustHtml",["$sce",function(t){return function(e){return t.trustAsHtml(e)}}])})();(function(){"use strict";var t=angular.module("es.Services.Web",["ngStorage","ngSanitize"]);t.constant("ESWEBAPI_URL",{__LOGIN__:"api/Login",__PUBLICQUERY__:"api/rpc/PublicQuery/",__USERSITES__:"api/Login/Usersites",__SCROLLERROOTTABLE__:"api/rpc/SimpleScrollerRootTable/",__ENTITYACTION__:"api/Entity/",__ENTITYBYGIDACTION__:"api/EntityByGID/",__ELASTICSEARCH__:"api/esearch/"});function e(t,e){return t.indexOf(e,t.length-e.length)!==-1}function r(t){var e=false;if(typeof t.__esrequest_sesssion!=="undefined"&&t.__esrequest_sesssion!==null){e=t.__esrequest_sesssion}if(e){return"Bearer "+e.WebApiToken}else{return""}}t.provider("es.Services.WebApi",function(){var t={host:"",subscriptionId:"",subscriptionPassword:""};return{getSettings:function(){return t},setSettings:function(r){t=r;if(!t.host||t.host.trim()==""){throw"host for Entersoft WEB API Server is not specified"}if(t.host){t.host=t.host.trim();if(!e(t.host,"/")){t.host+="/"}}return this},$get:["$http","$log","$sessionStorage","ESWEBAPI_URL",function(e,s,n,o){return{openSession:function(r){delete n.__esrequest_sesssion;return e({method:"post",url:t.host+o.__LOGIN__,data:{SubscriptionID:t.subscriptionId,SubscriptionPassword:t.subscriptionPassword,Model:r}})},setUser:function(t){var e=t.Model;n.__esrequest_sesssion=e},getUser:function(){return n.__esrequest_sesssion||false},fetchSimpleScrollerRootTable:function(s,i,u){var a=t.host.concat(o.__SCROLLERROOTTABLE__,s,"/",i);return e({method:"get",headers:{Authorization:r(n)},url:a,data:u})},fetchUserSites:function(r){return e({method:"post",url:t.host+o.__USERSITES__,data:{SubscriptionID:t.subscriptionId,SubscriptionPassword:t.subscriptionPassword,Model:r}})},executeNewEntityAction:function(s,i,u){var a=t.host.concat(o.__ENTITYACTION__,s,"/",u);return e({method:"post",headers:{Authorization:r(n)},url:a,data:i})},executeEntityActionByCode:function(s,i,u,a){var c=t.host.concat(o.__ENTITYACTION__,s,"/",i,"/",a);return e({method:"post",headers:{Authorization:r(n)},url:c,data:u})},executeEntityActionByGID:function(s,i,u,a){var c=t.host.concat(o.__ENTITYBYGIDACTION__,s,"/",i,"/",a);return e({method:"post",headers:{Authorization:r(n)},url:c,data:u})},fetchPublicQuery:function(s,i,u){var a=t.host.concat(o.__PUBLICQUERY__,s,"/",i);return e({method:"get",headers:{Authorization:r(n)},url:a,data:u})},eSearch:function(s,i,u){var a=t.host.concat(o.__ELASTICSEARCH__,s);return e({method:i,headers:{Authorization:r(n)},url:a,data:u})}}}]}});t.factory("es.Services.ElasticSearch",["es.Services.WebApi",function(t){return{searchIndex:function(e,r){var s=e+"/_search";return t.eSearch(s,"post",r)},searchIndexAndDocument:function(e,r,s){var n=e+"/"+r+"/_search";return t.eSearch(n,"post",s)},searchFree:t.eSearch}}])})();