(function(){"use strict";var e=angular.module("es.Core.Filters",[]);e.filter("esTrustHtml",["$sce",function(e){return function(t){return e.trustAsHtml(t)}}])})();(function(){"use strict";var e=angular.module("es.Services.Web",["ngStorage","ngSanitize"]);e.constant("ESWEBAPI_URL",{__LOGIN__:"api/Login",__PUBLICQUERY__:"api/rpc/PublicQuery/",__USERSITES__:"api/Login/Usersites",__SCROLLERROOTTABLE__:"api/rpc/SimpleScrollerRootTable/",__ENTITYACTION__:"api/Entity/",__ENTITYBYGIDACTION__:"api/EntityByGID/",__ELASTICSEARCH__:"api/esearch/"});function t(e,t){return e.indexOf(t,e.length-t.length)!==-1}function r(e,t){return e.toLowerCase().indexOf(t.toLowerCase())===0}function s(e){var t=false;if(typeof e.__esrequest_sesssion!=="undefined"&&e.__esrequest_sesssion!==null){t=e.__esrequest_sesssion}if(t){return"Bearer "+t.WebApiToken}else{return""}}e.provider("es.Services.WebApi",function(){var e="";var n={host:"",allowUnsecureConnection:false,subscriptionId:"",subscriptionPassword:""};return{getSettings:function(){return n},setSettings:function(s){var o="https://";var i="http://";n=s;if(n.host){n.host=n.host.trim();if(r(n.host,o)){n.host=n.host.slice(o.length).trim()}else if(r(n.host,i)){n.host=n.host.slice(i.length).trim()}if(n.host==""){throw"host for Entersoft WEB API Server is not specified"}if(!t(n.host,"/")){n.host+="/"}if(n.allowUnsecureConnection){e=i+n.host}else{e=o+n.host}}return this},$get:["$http","$log","$sessionStorage","ESWEBAPI_URL",function(t,r,o,i){return{openSession:function(r){delete o.__esrequest_sesssion;return t({method:"post",url:e+i.__LOGIN__,data:{SubscriptionID:n.subscriptionId,SubscriptionPassword:n.subscriptionPassword,Model:r}})},setUser:function(e){var t=e.Model;o.__esrequest_sesssion=t},getUser:function(){return o.__esrequest_sesssion||false},fetchSimpleScrollerRootTable:function(r,n,u){var a=e.concat(i.__SCROLLERROOTTABLE__,r,"/",n);return t({method:"get",headers:{Authorization:s(o)},url:a,data:u})},fetchUserSites:function(r){return t({method:"post",url:e+i.__USERSITES__,data:{SubscriptionID:n.subscriptionId,SubscriptionPassword:n.subscriptionPassword,Model:r}})},executeNewEntityAction:function(r,n,u){var a=e.concat(i.__ENTITYACTION__,r,"/",u);return t({method:"post",headers:{Authorization:s(o)},url:a,data:n})},executeEntityActionByCode:function(r,n,u,a){var c=e.concat(i.__ENTITYACTION__,r,"/",n,"/",a);return t({method:"post",headers:{Authorization:s(o)},url:c,data:u})},executeEntityActionByGID:function(r,n,u,a){var c=e.concat(i.__ENTITYBYGIDACTION__,r,"/",n,"/",a);return t({method:"post",headers:{Authorization:s(o)},url:c,data:u})},fetchPublicQuery:function(r,n,u){var a=e.concat(i.__PUBLICQUERY__,r,"/",n);return t({method:"get",headers:{Authorization:s(o)},url:a,data:u})},eSearch:function(r,n,u){var a=e.concat(i.__ELASTICSEARCH__,r);return t({method:n,headers:{Authorization:s(o)},url:a,data:u})}}}]}});e.factory("es.Services.ElasticSearch",["es.Services.WebApi",function(e){return{searchIndex:function(t,r){var s=t+"/_search";return e.eSearch(s,"post",r)},searchIndexAndDocument:function(t,r,s){var n=t+"/"+r+"/_search";return e.eSearch(n,"post",s)},searchFree:e.eSearch}}])})();